# 测试方法

按功能点列出可执行的测试步骤与预期结果。

## 1. 基础配置与启动行为
1. 删除本地数据目录后启动应用。
   - 预期：自动创建数据目录与历史目录。
2. 清空/删除 me.txt 启动。
   - 预期：弹出输入用户名对话框。
3. 关闭后重启。
   - 预期：加载已知联系人与历史记录。

## 1.1 软件设置窗口
1. 打开“设置”窗口。
   - 预期：显示所有设置项，带默认值。
2. 修改历史记录保存天数（例如 30）。
   - 预期：保存后仅加载最近 30 天历史。
3. 修改接收文件夹路径为自定义目录。
   - 预期：新文件接收保存到该目录。
4. 关闭“发送文件/文件夹自动同步”。
   - 预期：发送文件/文件夹不触发同步流程。
5. 关闭启动更新检查。
   - 预期：启动后不发起更新请求。
6. 设置固定网卡。
   - 预期：发送消息与文件使用该接口。

## 2. 节点发现与在线状态
1. 两台机器同网段启动。
   - 预期：互相自动发现并显示在线。
2. 一台机器断网/关闭应用。
   - 预期：另一端 15 秒左右变为离线。
3. 重连网络。
   - 预期：恢复在线且不反复跳动。

## 3. 联系人管理
1. 右键联系人查看用户信息。
   - 预期：显示 IP 与 ID。
2. 删除联系人。
   - 预期：联系人消失且历史记录被清理。

## 4. 文本聊天
1. 发送文本消息。
   - 预期：对方收到并显示时间戳。
2. 未读提示。
   - 预期：未读消息高亮；点击联系人后清除。

## 5. 可靠消息与离线消息
1. 对方离线时发送消息。
   - 预期：显示“等待对方上线...”。
2. 对方上线后。
   - 预期：离线消息自动重发并显示“已送达”。

## 6. 文件与文件夹传输
1. 发送单文件。
   - 预期：进度更新，完成后状态为“发送完成”。
2. 发送文件夹（含多层子目录）。
   - 预期：接收端自动解包，目录结构完整。
3. 断开网络再重连。
   - 预期：失败状态提示正确，不导致程序卡死。

## 7. 自动同步
1. 在同步目录中新增/修改文件。
   - 预期：触发同步任务并发送到对端。
2. 对端接收后。
   - 预期：对应文件更新成功，并记录同步状态。

## 8. 历史记录
1. 发送/接收消息后退出再启动。
   - 预期：历史记录保留。
2. 等待超过保存天数。
   - 预期：超期历史不再加载。

## 9. 多网卡与接口选择
1. 同时连接 Wi-Fi 与有线网。
   - 预期：默认使用流量更大的接口。
2. 在设置中指定接口。
   - 预期：发送使用该接口，其他接口不发送。

## 10. UI 与交互体验
1. 在线/离线分组显示。
   - 预期：在线列表与离线列表分区正确。
2. 拖拽文件到窗口。
   - 预期：自动发送并显示进度。

## 11. 版本更新
1. 触发更新检查。
   - 预期：显示最新版本信息或提示暂无更新。
